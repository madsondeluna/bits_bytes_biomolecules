<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Exerc√≠cios Pr√°ticos ‚Äî Bits, Bytes e Biomol√©culas</title>
  <link rel="stylesheet" href="styles.css">
  <style>
    #login-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(20px) saturate(150%);
      -webkit-backdrop-filter: blur(20px) saturate(150%);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 9999;
    }
    #login-box {
      background: rgba(255, 255, 255, 0.7);
      backdrop-filter: blur(30px) saturate(180%);
      -webkit-backdrop-filter: blur(30px) saturate(180%);
      padding: 40px;
      border-radius: 20px;
      border: 1px solid rgba(0, 0, 0, 0.1);
      box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.1);
      max-width: 400px;
      width: 90%;
    }
    #login-box h2 {
      margin-top: 0;
      color: #1e3a5f;
      text-align: center;
      font-weight: 600;
    }
    #login-box p {
      color: #4a5568;
    }
    #login-box input {
      width: 100%;
      padding: 12px;
      margin: 10px 0;
      border: 1px solid rgba(0, 0, 0, 0.15);
      border-radius: 10px;
      box-sizing: border-box;
      font-size: 16px;
      background: rgba(255, 255, 255, 0.5);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      color: #1e3a5f;
      transition: all 0.3s ease;
    }
    #login-box input::placeholder {
      color: rgba(0, 0, 0, 0.4);
    }
    #login-box input:focus {
      outline: none;
      border: 1px solid #2c5f7c;
      background: rgba(255, 255, 255, 0.7);
      box-shadow: 0 0 15px rgba(44, 95, 124, 0.2);
    }
    #login-box button {
      width: 100%;
      padding: 12px;
      background: linear-gradient(135deg, #1e3a5f 0%, #2c5f7c 100%);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      color: white;
      border: none;
      border-radius: 10px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      margin-top: 10px;
      transition: all 0.3s ease;
    }
    #login-box button:hover {
      background: linear-gradient(135deg, #2c5f7c 0%, #1e3a5f 100%);
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(30, 58, 95, 0.3);
    }
    .error-message {
      color: #ffebee;
      background: rgba(244, 67, 54, 0.3);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      font-size: 14px;
      margin-top: 10px;
      padding: 10px;
      border-radius: 8px;
      text-align: center;
      border: 1px solid rgba(244, 67, 54, 0.5);
      display: none;
    }
    .error-message:not(:empty) {
      display: block;
    }
    #logout-btn {
      position: fixed;
      top: 10px;
      right: 10px;
      padding: 8px 16px;
      background: #f44336;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 14px;
      z-index: 1000;
    }
    #logout-btn:hover {
      background: #d32f2f;
    }
    .hidden {
      display: none !important;
    }
  </style>
</head>
<body>
  <div id="login-overlay">
    <div id="login-box">
      <h2>üîê Acesso Restrito</h2>
      <p style="text-align: center; color: #1e3a5f; font-weight: 500;">Exerc√≠cios Pr√°ticos</p>
      <input type="text" id="username" placeholder="Usu√°rio" autocomplete="username">
      <input type="password" id="password" placeholder="Senha" autocomplete="current-password">
      <button onclick="checkLogin()">Entrar</button>
      <div id="error-msg" class="error-message"></div>
    </div>
  </div>
  <button id="logout-btn" class="hidden" onclick="logout()">Sair</button>
  <header style="text-align: center;">
    <h1>Exerc√≠cios Pr√°ticos ‚Äî Bits, Bytes e Biomol√©culas</h1>
    <p class="muted">Esta p√°gina cont√©m os exerc√≠cios pr√°ticos que ser√£o realizados durante o curso.</p>
    <p class="muted">Para acessar o conte√∫do te√≥rico completo, visite a <a href="index.html">p√°gina principal do curso</a>.</p>
  </header>

  <main>
    <div style="background:#fff3cd;border-left:4px solid #ffc107;padding:16px 20px;margin:20px 0;border-radius:4px;">
      <h3 style="margin-top:0;color:#856404;">Localiza√ß√£o dos Exerc√≠cios Pr√°ticos</h3>
      <p style="margin-bottom:0;color:#856404;">
        Os exerc√≠cios pr√°ticos est√£o organizados por m√≥dulos e ser√£o discutidos ponto a ponto durante a aula. Voc√™ pode acompanhar diretamente nesta p√°gina ou consultar o arquivo <a href="https://github.com/madsondeluna/bits_bytes_biomolecules/blob/main/EXERCISES.md" target="_blank" style="color:#856404;text-decoration:underline;"><code>EXERCISES.md</code></a> no reposit√≥rio do curso.
      </p>
    </div>

    <div id="content">Carregando exerc√≠cios pr√°ticos do EXERCISES.md‚Ä¶</div>
  </main>

  <footer style="text-align: center;">
    <p class="muted">
      <a href="index.html">‚Üê Voltar para o conte√∫do te√≥rico</a> | 
      Reposit√≥rio: <a href="https://github.com/madsondeluna/bits_bytes_biomolecules" target="_blank">GitHub</a>
    </p>
  </footer>

  <!-- Biblioteca para converter Markdown -> HTML -->
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

  <!-- Configura√ß√£o do MathJax para processar $...$ e $$...$$ -->
  <script>
    window.MathJax = {
      tex: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        displayMath: [['$$','$$']]
      },
      options: {
        skipHtmlTags: ['script','noscript','style','textarea','pre']
      }
    };
  </script>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>

  <script>
    // Puxa o EXERCISES.md bruto do GitHub e renderiza
    async function renderExercises(){
      const rawUrl = 'https://raw.githubusercontent.com/madsondeluna/bits_bytes_biomolecules/main/EXERCISES.md';
      try{
        const res = await fetch(rawUrl);
        if(!res.ok) throw new Error('N√£o foi poss√≠vel obter EXERCISES.md: ' + res.status);
        const md = await res.text();

        // Converte Markdown para HTML
        const html = marked.parse(md, {gfm:true, breaks:true});

        // Insere no DOM
        const container = document.getElementById('content');
        container.innerHTML = html;

        // Corrige caminhos relativos de imagens (se houver)
        try{
          const imgs = container.querySelectorAll('img');
          imgs.forEach(img => {
            const src = img.getAttribute('src') || '';
            if(!src) return;
            if(src.startsWith('http:') || src.startsWith('https:') || src.startsWith('//')) return;
            const path = src.replace(/^\.\/?/, '');
            const rawBase = 'https://raw.githubusercontent.com/madsondeluna/bits_bytes_biomolecules/main/';
            img.src = rawBase + path;
          });
        }catch(e){
          console.warn('Erro ao reescrever caminhos de imagem:', e);
        }

        // Ap√≥s inserir, pede ao MathJax para renderizar f√≥rmulas
        if(window.MathJax && MathJax.typesetPromise){
          MathJax.typesetPromise();
        }
      }catch(e){
        document.getElementById('content').textContent = 'Erro ao carregar EXERCISES.md: ' + e.message;
      }
    }

    // ========================================================================
    // CONFIGURA√á√ÉO DE USU√ÅRIOS E SENHAS
    // ========================================================================
    // Para adicionar ou modificar credenciais de acesso:
    // 1. Para ALTERAR uma senha existente: modifique o valor entre aspas
    // 2. Para ADICIONAR um novo usu√°rio: adicione uma nova linha no formato:
    //    'nome_usuario': 'senha',
    // 3. Para REMOVER um usu√°rio: delete a linha correspondente
    //
    // Exemplos:
    //   'joao': 'senha123',
    //   'maria': 'minhasenha456',
    //   'turma2025': 'acesso2025'
    // ========================================================================
    const AUTH_CREDENTIALS = {
      'aluno': 'biomol2025',          // ‚Üê ALTERE AQUI a senha do usu√°rio 'aluno'
      'professor': 'admin123',        // ‚Üê ALTERE AQUI a senha do usu√°rio 'professor'
      'jornada2025': 'metionina'      // ‚Üê ALTERE AQUI a senha do usu√°rio 'jornada2025'
      // Adicione mais usu√°rios abaixo, seguindo o padr√£o:
      // 'novo_usuario': 'nova_senha',
    };

    function checkLogin() {
      const username = document.getElementById('username').value.trim();
      const password = document.getElementById('password').value;
      const errorMsg = document.getElementById('error-msg');

      if (AUTH_CREDENTIALS[username] === password) {
        // Login bem-sucedido (usando sessionStorage - expira ao fechar o navegador)
        sessionStorage.setItem('bbb_auth', btoa(username + ':' + password));
        showContent();
        errorMsg.textContent = '';
      } else {
        // Login falhou
        errorMsg.textContent = 'Usu√°rio ou senha incorretos!';
        document.getElementById('password').value = '';
      }
    }

    function showContent() {
      document.getElementById('login-overlay').classList.add('hidden');
      document.getElementById('logout-btn').classList.remove('hidden');
      renderExercises();
    }

    function logout() {
      sessionStorage.removeItem('bbb_auth');
      document.getElementById('login-overlay').classList.remove('hidden');
      document.getElementById('logout-btn').classList.add('hidden');
      document.getElementById('username').value = '';
      document.getElementById('password').value = '';
      document.getElementById('error-msg').textContent = '';
    }

    // Verifica se j√° est√° autenticado
    function checkAuth() {
      const auth = sessionStorage.getItem('bbb_auth');
      if (auth) {
        try {
          const decoded = atob(auth);
          const [username, password] = decoded.split(':');
          if (AUTH_CREDENTIALS[username] === password) {
            showContent();
            return;
          }
        } catch (e) {
          sessionStorage.removeItem('bbb_auth');
        }
      }
    }

    // Permite login com Enter
    document.addEventListener('DOMContentLoaded', function() {
      checkAuth();
      document.getElementById('password').addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
          checkLogin();
        }
      });
      document.getElementById('username').addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
          document.getElementById('password').focus();
        }
      });
    });
  </script>
</body>
</html>
